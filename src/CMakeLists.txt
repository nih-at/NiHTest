# for config.h
INCLUDE_DIRECTORIES(${CMAKE_CURRENT_BINARY_DIR}/..)

SET(COMPATIBILITY_SOURCES)
IF(NOT HAVE_GETOPT_LONG)
  LIST(APPEND COMPATIBILITY_SOURCES getopt_long.c)
ENDIF()
IF(NOT HAVE_GETPROGRAME)
  LIST(APPEND COMPATIBILITY_SOURCES getprogname.c)
ENDIF()


SET(NIHTEST_SOURCES
    nihtest.cc
)

ADD_EXECUTABLE(nihtest ${NIHTEST_SOURCES} ${COMPATIBILITY_SOURCES})

# TODO: make installing optional
INSTALL(TARGETS nihtest RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR})

