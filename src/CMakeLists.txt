# for config.h
INCLUDE_DIRECTORIES(BEFORE ${CMAKE_CURRENT_SOURCE_DIR} ${CMAKE_CURRENT_BINARY_DIR}/..)

SET(COMPATIBILITY_SOURCES)
IF(NOT HAVE_GETOPT_LONG)
  MESSAGE(WARNING "adding getopt_long.c to COMPATIBILITY_SOURCES")
  LIST(APPEND COMPATIBILITY_SOURCES getopt_long.c)
ENDIF()
IF(NOT HAVE_GETPROGNAME)
  MESSAGE(WARNING "adding getprogname.c to COMPATIBILITY_SOURCES")
  LIST(APPEND COMPATIBILITY_SOURCES getprogname.c)
ENDIF()


SET(NIHTEST_SOURCES
    nihtest.cc
    Variables.cc
)

MESSAGE(WARNING "nihtest sources are ${NIHTEST_SOURCES} ${COMPATIBILITY_SOURCES}")
ADD_EXECUTABLE(nihtest ${NIHTEST_SOURCES} ${COMPATIBILITY_SOURCES})

# TODO: make installing optional
INSTALL(TARGETS nihtest RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR})

